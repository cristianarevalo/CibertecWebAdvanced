(function(){function n(n,t,i,r,u){function e(f){var e=u.defer(),o=r.getApiUrl()+"/Token",s="username="+f.userName+"&password="+f.password;return n.post(o,s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(u){n.defaults.headers.common.Authorization="Bearer "+u.data.access_token;i.set("userToken",{token:u.data.access_token,userName:f.userName});r.setLogin(!0);t.go("home");e.reject(!0)},function(){e.reject(!1)}),e.promise}function o(){n.defaults.headers.common.Authorization="";i.remove("userToken");r.setLogin(!1)}var f={};return f.login=e,f.logout=o,f}angular.module("app").factory("authenticationService",n);n.$inject=["$http","$state","localStorageService","configService","$q"]})(),function(){function n(n){function i(t){return n.get(t)}function r(t,i){return n.post(t,i)}function u(t,i){return n.put(t,i)}function f(t){return n.delete(t)}var t={};return t.getData=i,t.postData=r,t.putData=u,t.deleteData=f,t}angular.module("app").factory("dataService",n);n.$inject=["$http"]}(),function(){"use strict";function n(){function r(n){i=n}function u(){return i}function f(){return t}function e(n){t=n}var n={},t=undefined,i=!1;return n.setLogin=r,n.getLogin=u,n.setApiUrl=e,n.getApiUrl=f,n}angular.module("app").factory("configService",n)}(),function(){function n(){return{templateUrl:"app/components/modal/modal-directive.html",restrict:"E",transclude:!0,scope:{title:"@",buttonTitle:"@",saveFunction:"=",closeFunction:"=",readOnly:"=",isDelete:"="}}}angular.module("app").directive("modalPanel",n)}(),function(){"use strict";function n(n,t,i,r){function f(){i.getLogin()&&r.go("home");t.logout()}function e(){t.login(u.user).then(function(){u.showError=!1;r.go("home")},function(){u.showError=!0})}var u=this;u.user={};u.title="login";u.login=e;u.showError=!1;f()}angular.module("app").controller("loginController",n);n.$inject=["$http","authenticationService","configService","$state"]}(),function(){"use strict";function n(n,t,i){function c(){if(!t.getLogin())return i.go("login");a();l()}function l(){$.connection.hub.logging=!0;r.notificationHubProxy=$.connection.notificationHub;r.notificationHubProxy.client.addProductId=function(n){console.log(n);r.blockedIds=n};r.notificationHubProxy.client.removeProductId=function(n){console.log(n);r.blockedIds=n};$.connection.hub.start().done(function(){console.log("Hub started success")}).fail(function(n){console.log(n)})}function a(){var n=window.innerWidth>0?window.innerWidth:screen.width;n<420&&(r.maxSize=5);y()}function v(){o(r.currentPage)}function y(){n.getData(u+"/product/count").then(function(n){r.totalRecords=n.data;o(r.currentPage)},function(n){console.log(n)})}function o(t){n.getData(u+"/product/listPaginated?page="+t+"&pageSize="+r.itemsPerPage).then(function(n){r.productList=n.data},function(n){r.productList=[];console.log(n)})}function f(){n.getData(u+"/product").then(function(n){r.productList=n.data},function(n){r.productList=[];console.log(n)})}function p(n){var t=r.blockedIds.indexOf(n);return t>-1}function s(t){if(r.isEdited=!1,p(t)){r.isEdited=!0;return}r.product=null;n.getData(u+"/product/"+t).then(function(n){r.product=n.data;r.notificationHubProxy.server.addProductId(r.blockedIds,t)},function(n){r.product=null;console.log(n)})}function h(){r.product&&n.putData(u+"/product",r.product).then(function(){r.product={};f();e()},function(n){r.product={};console.log(n)})}function w(){r.product&&n.postData(u+"/product",r.product).then(function(){s(result.data.id);f();r.showCreate=!0},function(n){console.log(n)})}function b(){r.product={};r.modalTitle="New Product";r.modalButtonTitle="Create";r.readOnly=!1;r.modalFunction=w;r.isDelete=!1}function k(){r.showCreate=!1;r.modalTitle="Edit Product";r.modalButtonTitle="Update";r.readOnly=!1;r.modalFunction=h;r.isDelete=!1;r.isEdited===!1&&angular.element("#modal-container").modal("show")}function d(){r.showCreate=!1;r.modalTitle="Delete Product";r.modalButtonTitle="Delete";r.readOnly=!1;r.modalFunction=h;r.isDelete=!1}function e(){r.product&&r.notificationHubProxy.server.removeProductId(r.blockedIds,r.product.id);angular.element("#modal-container").modal("hide")}var u=t.getApiUrl(),r=this;r.product={};r.productList=[];r.modalButtonTitle="";r.readOnly=!1;r.isDelete=!1;r.modalTitle="";r.showCreate=!1;r.totalRecords=0;r.currentPage=1;r.maxSize=10;r.itemsPerPage=10;r.notificationHubProxy={};r.blockedIds=[];r.isEdited=!1;r.getProduct=s;r.create=b;r.edit=k;r.delete=d;r.pageChanged=v;r.closeModal=e;c()}angular.module("app").controller("productController",n);n.$inject=["dataService","configService","$state"]}(),function(){"use strict";function n(n,t){function u(){n.getLogin()||t.go("login")}function f(){i.csvLines=[];e(function(n){var u=[],f=n.length,r=0,i=new Worker("/js/worker.js"),t;for(i.addEventListener("message",function(n){u.push(n.data);console.log("Processing...");r++;r>=f&&i.terminate()}),t=0;t<n.length;t++)i.postMessage(n[t])})}function e(n){var t=new FileReader;t.onload=function(){return n(t.result.split("\r\n"))};t.readAsBinaryString(r.files[0])}var i=this,r;i.csvLines=[];i.processFile=f;r=document.getElementById("csvViewer");u()}angular.module("app").controller("csvController",n)}(),function(){"use strict";function n(){return{restrict:"E",transclude:!0,scope:{id:"@",productName:"@",supplierId:"@",unitPrice:"@","package":"@",isDiscontinued:"="},templateUrl:"app/private/product/directives/product-card/product-card.html",controller:t}}function t(){}angular.module("app").directive("productCard",n)}(),function(){"use strict";function n(){return{restrict:"E",scope:{product:"="},templateUrl:"app/private/product/directives/product-form/product-form.html"}}angular.module("app").directive("productForm",n)}();